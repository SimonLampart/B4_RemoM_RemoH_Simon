<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Gourmet Globe</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/contact.css" />
</head>
<body>
    <header>
        <div class="logo-placeholder">Logo</div>
        <div class="burger-menu">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Home</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li><a href="contact.html" class="active">Kontakt</a></li>
            </ul>
        </nav>
    </header>

    <main class="container">
        <section class="lead-image full-width-lead-image">
            <img src="images/lead.jpeg" alt="Leadbild" />
        </section>
        <section class="lead-text">
            <h1>Kontakt</h1>
            <p>Wir freuen uns, von Ihnen zu hören! Nutzen Sie unser Formular für Anfragen oder Feedback.</p>
        </section>

        <section class="two-columns contact-section-bg-1">
            <form id="contactForm">
                <label for="prename">Vorname *</label><br />
                <input type="text" id="prename" name="prename" required /><br /><br />

                <label for="name">Nachname *</label><br />
                <input type="text" id="name" name="name" required /><br /><br />

                <label for="email">E-Mail-Adresse *</label><br />
                <input type="email" id="email" name="email" required /><br /><br />

                <button type="submit">Absenden</button>
            </form>
        </section>

        <div class="throbber-overlay" id="throbberOverlay">
            <div class="throbber"></div>
        </div>

        <!-- Geflickter Roulette-Wrapper -->
        <div class="roulette-wrapper" id="rouletteWrapper">
            <div class="roulette-wheel" id="rouletteWheel">
                <div class="roulette-segment segment-1">
                    <div class="segment-text">5.- Gutschein</div>
                </div>
                <div class="roulette-segment segment-2">
                    <div class="segment-text">10.- Gutschein</div>
                </div>
                <div class="roulette-segment segment-3">
                    <div class="segment-text">15.- Gutschein</div>
                </div>
                <div class="roulette-segment segment-4">
                    <div class="segment-text">20.- Gutschein</div>
                </div>
                <div class="roulette-segment segment-5">
                    <div class="segment-text">25.- Gutschein</div>
                </div>
                <div class="roulette-segment segment-6">
                    <div class="segment-text">30.- Gutschein</div>
                </div>
                <div class="roulette-center"></div>
            </div>

            <div class="roulette-pointer"></div>

            <div class="roulette-result" id="rouletteResult">
                <span id="winningMessage"></span>
                <p id="winningCode"></p>
                <button class="close-roulette-button" id="closeRouletteButton">Schließen</button>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 Schulprojekt - Keine reale Website</p>
        <p>Mitwirkende: Remo Hess, Remo Auf der Maur, Simon Lampart</p>
        <div class="social-links">
            <a href="#" target="_blank" rel="noopener noreferrer">Facebook</a> |
            <a href="#" target="_blank" rel="noopener noreferrer">Twitter</a> |
            <a href="#" target="_blank" rel="noopener noreferrer">Instagram</a>
        </div>
    </footer>

    
    
    <script>
        const burgerMenu = document.querySelector('.burger-menu');
        const nav = document.querySelector('header nav');
        const footer = document.querySelector('footer');

        const contactForm = document.querySelector('.two-columns form');
        const throbberOverlay = document.getElementById('throbberOverlay');
        const rouletteWrapper = document.getElementById('rouletteWrapper'); // Neuer Wrapper
        const rouletteWheel = document.getElementById('rouletteWheel');
        const rouletteResult = document.getElementById('rouletteResult');
        const winningMessageSpan = document.getElementById('winningMessage');
        const winningCodeParagraph = document.getElementById('winningCode');
        const closeRouletteButton = document.getElementById('closeRouletteButton');

        // Definition der möglichen Gewinne und ihrer Codes
        const prizes = [
            { name: "5.- Gutschein", code: "GUTSCHEIN5", type: "gutschein" },
            { name: "Gratis Versand", code: "GRATISVERSAND", type: "gratis_versand" },
            { name: "Niete", code: "LEIDERKEINGLUECK", type: "niete" },
            { name: "5.- Gutschein", code: "GUTSCHEIN5", type: "gutschein" },
            { name: "Gratis Versand", code: "GRATISVERSAND", type: "gratis_versand" },
            { name: "Niete", code: "LEIDERKEINGLUECK", type: "niete" }
        ];

        burgerMenu.addEventListener('click', () => {
            nav.classList.toggle('open');
        });

        function checkFooterVisibility() {
            const documentHeight = document.documentElement.scrollHeight;
            const windowHeight = window.innerHeight;
            const scrollY = window.scrollY;
            const footerHeight = footer.offsetHeight;

            if (scrollY + windowHeight >= documentHeight - footerHeight) {
                footer.classList.add('visible');
            } else {
                footer.classList.remove('visible');
            }
        }

        window.addEventListener('scroll', checkFooterVisibility);
        window.addEventListener('resize', checkFooterVisibility);
        checkFooterVisibility();

        document.addEventListener('DOMContentLoaded', () => {
            const navLinks = document.querySelectorAll('header nav ul li a');
            const currentPath = window.location.pathname.split('/').pop();

            navLinks.forEach(link => {
                const linkPath = link.getAttribute('href').split('/').pop();
                if (linkPath === currentPath) {
                    link.classList.add('active');
                }
            });
        });

        // Formular-Submission und Glücksrad-Logik
        contactForm.addEventListener('submit', function(event) {
            event.preventDefault(); // Standard-Formularversand verhindern

            // Throbber anzeigen
            throbberOverlay.classList.add('visible');

            // Simulieren einer Formularübermittlung (z.B. mit fetch oder setTimeout)
            setTimeout(() => {
                // Throbber ausblenden
                throbberOverlay.classList.remove('visible');

                // Glücksrad anzeigen
                rouletteWrapper.classList.add('visible');
                rouletteResult.classList.remove('visible'); // Ergebnis verstecken, falls vorher sichtbar
                winningMessageSpan.textContent = ''; // Nachricht zurücksetzen
                winningCodeParagraph.textContent = ''; // Code zurücksetzen

                // Zufällige Zahl für das Gewinnsegment (0-5 für Index)
                const winningIndex = Math.floor(Math.random() * prizes.length); // 0 bis 5
                
                // Berechne die Gradzahl für das Gewinnsegment (jedes Segment 60 Grad bei 6 Segmenten)
                // Wir drehen es so, dass der Pfeil auf die Mitte des Segments zeigt.
                // 360 / 6 = 60 Grad pro Segment.
                // Wir wollen, dass der Pfeil auf das *gewählte* Segment zeigt.
                // Die Segmente sind im CSS von 0 Grad (Segment 1) bis 300 Grad (Segment 6) positioniert.
                // Um auf die Mitte des Segments zu zeigen: (Index * 60) + (60 / 2) = Index * 60 + 30
                // Da der Pfeil oben ist und die Segmente im Uhrzeigersinn angeordnet sind,
                // müssen wir die Rotation so anpassen, dass das Gewinnsegment unter dem Pfeil landet.
                // Eine Rotation von 0 Grad würde das Segment 1 nach oben zeigen.
                // Wenn wir Segment 1 gewinnen (Index 0), wollen wir 330 Grad Rotation (360 - 30).
                // Wenn wir Segment 2 gewinnen (Index 1), wollen wir 270 Grad Rotation (360 - 30 - 60).
                // ...
                // Formel: (360 * n) - (winningIndex * degreesPerSegment) - (degreesPerSegment / 2)
                // n = Anzahl der vollen Umdrehungen (z.B. 5 für eine gute Animation)
                const degreesPerSegment = 360 / prizes.length; // 60
                const numSpins = 5; // Anzahl der vollen Umdrehungen
                const targetRotation = (360 * numSpins) - (winningIndex * degreesPerSegment) - (degreesPerSegment / 2);

                // Rotation anwenden
                rouletteWheel.style.transform = `rotate(${targetRotation}deg)`;

                // Ergebnis nach der Drehung anzeigen (muss mit der Transition-Dauer des Rades übereinstimmen)
                setTimeout(() => {
                    const wonPrize = prizes[winningIndex];
                    winningMessageSpan.textContent = `Du hast gewonnen: ${wonPrize.name}!`;
                    
                    if (wonPrize.type !== "niete") {
                        winningCodeParagraph.textContent = `Dein Code: ${wonPrize.code}`;
                    } else {
                        winningCodeParagraph.textContent = "Versuch es bald wieder!";
                    }
                    
                    rouletteResult.classList.add('visible');
                }, 4000); // Nach 4 Sekunden, da die Drehung 4 Sekunden dauert (entspricht der CSS-Transition)
            }, 2000); // Simulierte 2 Sekunden Übermittlungszeit
        });

        closeRouletteButton.addEventListener('click', () => {
            rouletteWrapper.classList.remove('visible');
            // Reset des Glücksrads für die nächste Verwendung
            rouletteWheel.style.transform = `rotate(0deg)`;
        });
    </script>
</body>
</html>
